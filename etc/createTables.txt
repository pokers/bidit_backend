CREATE TABLE IF NOT EXISTS user(
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT,
    status      INT UNSIGNED NOT NULL,
    uniqueID    VARCHAR(255) NULL,
    passwd      VARCHAR(255),
    joinPath    INT NULL,
    gender      INT NULL,
    birth       VARCHAR(64) NULL,
    email       VARCHAR(64) NULL,
    phone       VARCHAR(32) NULL,
    createdAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updatedAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deletedAt   DATETIME NULL,
    description VARCHAR(255) CHARACTER SET UTF8 NULL,
    PRIMARY KEY(id),
    INDEX status(status),
    INDEX uniqueID(uniqueID),
    INDEX createdAt(createdAt)
)

// 칼럼 추가
ALERT TABLE 'user' ADD birth VARCHAR(64) NULL AFTER 'gender'

CREATE TABLE IF NOT EXISTS category (
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT,
    status      INT UNSIGNED NOT NULL,
    parentId    INT UNSIGNED NULL,
    name        VARCHAR(32) CHARACTER SET UTF8 NULL,
    depth       INT UNSIGNED NULL,
    createdAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updatedAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deletedAt   DATETIME NULL,
    PRIMARY KEY(id),
    FOREIGN KEY(parentId) REFERENCES category(id),
    INDEX depth(depth),
    INDEX createdAt(createdAt)
)

CREATE TABLE IF NOT EXISTS item (
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT,
    status      INT UNSIGNED NOT NULL,
    userId      INT UNSIGNED NOT NULL,
    categoryId  INT UNSIGNED NOT NULL,
    sPrice      INT UNSIGNED NULL,
    cPrice      INT UNSIGNED NULL,
    buyNow      INT UNSIGNED NULL,
    name        VARCHAR(255) CHARACTER SET UTF8 NULL,
    title       VARCHAR(255) CHARACTER SET UTF8 NULL,
    dueDate         DATETIME NULL,
    deliveryType    INT UNSIGNED NULL,
    sCondition   INT UNSIGNED NULL,
    aCondition  INT UNSIGNED NULL,
    createdAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updatedAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deletedAt   DATETIME NULL,
    PRIMARY KEY(id),
    FOREIGN KEY(userId) REFERENCES user(id),
    FOREIGN KEY(categoryId) REFERENCES category(id),
    INDEX dueDate(dueDate),
    INDEX status(status),
    INDEX createdAt(createdAt)
)

CREATE TABLE IF NOT EXISTS itemDescription (
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT,
    status      INT UNSIGNED NOT NULL,
    itemId      INT UNSIGNED NOT NULL,
    type        INT UNSIGNED NOT NULL,
    description TEXT CHARACTER SET UTF8MB4 NULL,
    createdAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updatedAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deletedAt   DATETIME NULL,
    PRIMARY KEY(id),
    FOREIGN KEY(itemId) REFERENCES item(id),
    INDEX type(type),
    INDEX createdAt(createdAt)
)

CREATE TABLE IF NOT EXISTS itemImage (
    id          INT UNSIGNED NOT NULL AUTO_INCREMENT,
    status      INT UNSIGNED NOT NULL,
    itemId      INT UNSIGNED NOT NULL,
    type        INT UNSIGNED NOT NULL,
    url         TEXT CHARACTER SET UTF8MB4 NULL,
    createdAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updatedAt   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deletedAt   DATETIME NULL,
    PRIMARY KEY(id),
    FOREIGN KEY(itemId) REFERENCES item(id),
    INDEX type(type),
    INDEX createdAt(createdAt)
)